<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>by mautasim</title>

<!-- PDF LIB -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body{font-family:Arial;background:#f2f2f2;margin:0;padding:10px}
#bill{background:#fff;max-width:800px;margin:auto;padding:15px;border:2px solid #000}
.header{text-align:center}
.header img{max-width:120px}
.box{border:1px solid #000;padding:8px;margin-top:8px}
.flex{display:flex;gap:10px;flex-wrap:wrap}
input{width:100%;padding:6px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #000;padding:6px;text-align:center}
button{padding:8px;width:100%;margin-top:8px}
.footer{text-align:center;margin-top:15px;font-size:12px}
canvas{border:1px solid #000;width:100%;height:150px}
@media print{body{background:#fff}}
  canvas{
  border:1px solid #000;
  width:100%;
  max-width:300px;
  height:120px;
  touch-action:none;
}
#pdfWrapper{
  background:white;
}

@media print{
  #pdfWrapper{
    width:794px;
    margin:auto;
  }
}

</style>

</head>
<body>
<div id="pdfWrapper">
  <div id="bill">
  </div>
</div>

  <div class="header">
    <img src="logo.png" alt="Logo">
    <h2>NAVEED TEXTILES</h2>
  </div>

  <div class="box">
    Email: naveedtextiles14@gmail.com<br>
    Phone: 9906403030 / 9906851124
  </div>

  <div class="box flex">
    <div>
      Bill No
      <input id="invoiceNo" readonly>
    </div>
    <div>
      Date
      <input id="billDate" readonly>
    </div>
  </div>

  <table>
    <thead>
      <tr><th>#</th><th>Item</th><th>Qty</th><th>Price</th><th>Amount</th></tr>
    </thead>
    <tbody id="items">
      <tr>
        <td>1</td>
        <td><input></td>
        <td><input type="number" oninput="calc()"></td>
        <td><input type="number" oninput="calc()"></td>
        <td class="amt">0</td>
      </tr>
    </tbody>
  </table>

<button onclick=""addRow(">Add Item</button>

  <div class="box flex">
    <div>Discount %<input id="disc" type="number" value="0" oninput="calc()"></div>
    <div>Paid ₹<input id="paid" type="number" value="0" oninput="calc()"></div>
  </div>

  <h3 id="total">Total: ₹0</h3>
  <h3 id="balance">Balance: ₹0</h3>

  <div class="box">
    <h3>Authorized Signature</h3>
<canvas id="sign" width="300" height="120"></canvas>
<button onclick=""clearSign(">Clear Signature</button>

  </div>

  <div class="footer">Web built by Mautasim</div>
</div>

<button onclick=""downloadPDF(">Download PDF</button> <button onclick=""whatsappPDF(">WhatsApp PDF</button>

<script>

// invoice & dat

le  in==localStorag..getItem('inv'|||100;

in++;;localStorag..setItem('inv,,inv;

invoiceN..valu=='INV-++in;

billDat..valu==ne  Date(..toISOString(..split('T')[0;


functio  addRow()
   cons  ==documen..getElementById('items';
   cons  ==..insertRow(;
   ..innerHTM==`<td>${..row..length}</td><td><input></td><td><input type=number oninput=calc()></td><td><input type=number oninput=calc()></td><td class=amt>0</td>;




functio  calc()
   le  su==;
   documen..querySelectorAll('#items tr'..forEach(=>>
     cons  ==..cells[2..children[0?..valu|||;
     cons  ==..cells[3..children[0?..valu|||;
     cons  ==**;
     ..querySelector('.amt'..innerTex==;
     su+==;
   };
   le  ==su**(dis..valu//100;
   le  tota==su--;
   totalE==tota;
   totalTex==`Total: ₹${total};
   documen..getElementById('total'..innerTex==totalTex;
   documen..getElementById('balance'..innerTex==`Balance: ₹${tota--(pai..valu|||0)};




// signatur






function whatsappPDF(){
  alert('PDF will download. Share it manually on WhatsApp.');
}
</script>
<script>
const canvas = document.getElementById("sign");
const ctx = canvas.getContext("2d");
let drawing = false;

function getPos(e){
  const rect = canvas.getBoundingClientRect();
  if(e.touches){
    return {
      x: e.touches[0].clientX - rect.left,
      y: e.touches[0].clientY - rect.top
    };
  }
  return { x: e.offsetX, y: e.offsetY };
}

canvas.addEventListener("mousedown", e=>{
  drawing=true;
  const p=getPos(e);
  ctx.beginPath();
  ctx.moveTo(p.x,p.y);
});
canvas.addEventListener("mousemove", e=>{
  if(!drawing) return;
  const p=getPos(e);
  ctx.lineTo(p.x,p.y);
  ctx.stroke();
});
canvas.addEventListener("mouseup", ()=>drawing=false);

canvas.addEventListener("touchstart", e=>{
  drawing=true;
  const p=getPos(e);
  ctx.beginPath();
  ctx.moveTo(p.x,p.y);
});
canvas.addEventListener("touchmove", e=>{
  e.preventDefault();
  if(!drawing) return;
  const p=getPos(e);
  ctx.lineTo(p.x,p.y);
  ctx.stroke();
});
canvas.addEventListener("touchend", ()=>drawing=false);

function clearSign(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
}
</script>
<script>
function downloadPDF(){
  const el = document.getElementById("pdfWrapper");
  html2pdf().set({
    margin:10,
    filename:'Invoice.pdf',
    html2canvas:{scale:2,useCORS:true},
    jsPDF:{unit:'mm',format:'a4',orientation:'portrait'}
  }).from(el).save();
}
</script>

</body>
</html>
