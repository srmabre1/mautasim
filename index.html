<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>mautasim</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body{font-family:Arial;background:#eaeaea;padding:20px}
.invoice{background:#fff;max-width:900px;margin:auto;padding:20px;border:2px solid #000}
.center{text-align:center}
.box{border:1px solid #000;padding:8px;margin-top:8px}
.flex{display:flex;justify-content:space-between;gap:10px}
input{width:100%;padding:4px;box-sizing:border-box}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #000;padding:6px;text-align:center}
button{padding:8px 14px;margin-top:10px;cursor:pointer}
.right{text-align:right}
canvas{border:1px solid #000}
</style>
</head>
<body>

<div class="invoice" id="bill">

<h2 class="center">TAX INVOICE</h2>

<div class="box">
<b>Shop Name:</b> <input id="shop" value="NAVEED TEXTILES">
<b>Address:</b> <input value="Your Shop Address">
<div class="flex">
<div><b>Phone:</b><input value="0000000000"></div>
<div><b>Email:</b><input value="email@example.com"></div>
</div>
</div>

<div class="box flex">
<div style="width:50%">
<b>Bill To</b>
<input placeholder="Customer Name">
<input placeholder="Customer Address">
<input placeholder="Customer Phone">
</div>
<div style="width:50%">
<b>Invoice Details</b>
Bill No <input value="1">
Date <input type="date">
</div>
</div>

<table id="items">
<tr><th>#</th><th>Item Name</th><th>Qty</th><th>Price</th><th>Amount</th></tr>
<tr>
<td>1</td>
<td><input></td>
<td><input type="number" oninput="calc()"></td>
<td><input type="number" oninput="calc()"></td>
<td class="amt">0</td>
</tr>
</table>
<button onclick="addRow()">Add Item</button>

<div class="box right">
Discount % <input id="discount" value="0" oninput="calc()" style="width:80px"><br>
GST % <input id="gst" value="0" oninput="calc()" style="width:80px"><br>
<h3 id="total">Total: ₹0</h3>
</div>

<div class="box">
<b>Authorized Signature</b><br>
<canvas id="sign" width="300" height="100"></canvas><br>
<button onclick="clearSign()">Clear Signature</button>
</div>

<div class="box center">Web built by Mautasim</div>

<button onclick="downloadPDF()">Download Bill PDF</button>

</div>

<script>
function addRow(){
let t=document.getElementById('items');
let r=t.insertRow();
r.innerHTML=`<td>${t.rows.length-1}</td><td><input></td><td><input type='number' oninput='calc()'></td><td><input type='number' oninput='calc()'></td><td class='amt'>0</td>`;
}

function calc(){
let rows=document.querySelectorAll('#items tr');
let sum=0;
rows.forEach((r,i)=>{
if(i>0){
let q=r.cells[2].firstChild.value||0;
let p=r.cells[3].firstChild.value||0;
let a=q*p;
r.cells[4].innerText=a;
sum+=a;
}
});
let d=sum*(discount.value/100);
let g=sum*(gst.value/100);
document.getElementById('total').innerText='Total: ₹'+(sum+g-d);
}

let c=document.getElementById('sign'),x=c.getContext('2d'),draw=false;
c.onmousedown=()=>draw=true;
c.onmouseup=()=>{draw=false;x.beginPath();}
c.onmousemove=e=>{if(draw){x.lineTo(e.offsetX,e.offsetY);x.stroke();}}
function clearSign(){x.clearRect(0,0,300,100)}

function downloadPDF(){
const { jsPDF } = window.jspdf;
let pdf=new jsPDF('p','mm','a4');
pdf.html(document.getElementById('bill'),{callback:p=>p.save('Invoice.pdf'),x:5,y:5});
}
</script>
</body>
</html>
