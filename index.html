<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shop Billing</title>


<!-- Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>


<style>
body{font-family:Arial;background:#f2f2f2;margin:0;padding:10px}
#pdf{background:#fff;max-width:800px;margin:auto;padding:10px;border:2px solid #000}
.header{text-align:center}
.header img{max-width:100px}
.box{border:1px solid #000;padding:8px;margin-top:8px}
.flex{display:flex;gap:10px;flex-wrap:wrap}
input{width:100%;padding:6px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #000;padding:6px;text-align:center}
button{padding:10px;margin-top:10px;width:100%}
canvas{border:1px solid #000;width:100%;height:150px;touch-action:none}
.footer{text-align:center;margin-top:10px;font-size:12px}
</style>
</head>
<body>


<div id="pdf">


<div class="header">
<img src="logo.png">
<h2>NAVEED TEXTILES</h2>
</div>


<div class="box">Email: naveedtextiles14@gmail.com<br>Phone: 9906403030</div>


<div class="box flex">
<div>Bill No:<input id="billNo" readonly></div>
<div>ðŸ“… Date:<input id="billDate" readonly></div>
</div>


<table id="items">
<tr><th>#</th><th>Item</th><th>Qty</th><th>Price</th><th>Amount</th></tr>
<tr>
<td>1</td>
<td><input></td>
<td><input type="number" oninput="calc()"></td>
<td><input type="number" oninput="calc()"></td>
<td class="amt">0</td>
</tr>
</table>


<button onclick="addRow()">Add Item</button>


<div class="box flex">
<div>Discount %<input id="disc" type="number" value="0" oninput="calc()"></div>
<div>Paid â‚¹<input id="paid" type="number" value="0" oninput="calc()"></div>
</div>


<h3 id="total">Total: â‚¹0</h3>
<h3 id="balance">Balance: â‚¹0</h3>


<div class="box">
<h3>Authorized Signature</h3>
<canvas id="sign"></canvas>
<button onclick="clearSign()">Clear Signature</button>
</div>


<div class="footer">Web built by Mautasim</div>
</div>


<button onclick="downloadPDF()">Download PDF</button>
<button onclick="sharePDF()">WhatsApp PDF</button>


<script>
// Bill number & date
let inv = localStorage.getItem('inv') || 1000;
inv++;
localStorage.setItem('inv',inv);
billNo.value = 'INV-'+inv;
billDate.value = new Date().toISOString().split('T')[0];


function addRow(){
const t=document.getElementById('items');
const r=t.insertRow();
r.innerHTML=`<td>${t.rows.length-1}</td><td><input></td><td><input type=number oninput=calc()></td><td><input type=number oninput=calc()></td><td class=amt>0</td>`;
}


function calc(){
let sum=0;
document.querySelectorAll('#items tr').forEach((r,i)=>{
if(i==0) return;
let q=r.cells[2].querySelector('input').value||0;
let p=r.cells[3].querySelector('input').value||0;
let a=q*p;
r.cells[4].innerText=a;
sum+=a;
});
let d=sum*(disc.value/100);
let total=sum-d;
total.innerText='Total: â‚¹'+total;
balance.innerText='Balance: â‚¹'+(total-(paid.value||0));
}


// Signature
const c=document.getElementById('sign');
const ctx=c.getContext('2d');
let draw=false;
function pos(e){let r=c.getBoundingClientRect();return{x:(e.touches?e.touches[0].clientX:e.clientX)-r.left,y:(e.touches?e.touches[0].clientY:e.clientY)-r.top}}
['mousedown','touchstart'].forEach(e=>c.addEventListener(e,a=>{draw=true;let p=pos(a);ctx.beginPath();ctx.moveTo(p.x,p.y);}));
['mousemove','touchmove'].forEach(e=>c.addEventListener(e,a=>{if(!draw)return;a.preventDefault();let p=pos(a);ctx.lineTo(p.x,p.y);ctx.stroke();}));
['mouseup','touchend'].forEach(e=>c.addEventListener(e,()=>draw=false));
function clearSign(){ctx.clearRect(0,0,c.width,c.height)}
  </body>

</html>
